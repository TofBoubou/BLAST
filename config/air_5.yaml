# BLAST Configuration File - 5-Species Air Model
# Configuration for high-temperature air simulation with non-equilibrium chemistry

simulation:
  body_type: axisymmetric              # Geometry type: axisymmetric, cone, two_d, flat_plate
  only_stagnation_point: true          # Solve only at stagnation point (true) or full body (false)
  finite_thickness: false              # Consider finite body thickness effects
  diffusion_type: stefan_maxwell       # Mass diffusion model: ramshaw, stefan_maxwell, mpp
  consider_thermal_diffusion: false    # Include thermal diffusion (Soret effect)
  consider_dufour_effect: false        # Include Dufour effect (diffusion thermo)
  chemical_mode: "non_equilibrium"     # Chemistry: "frozen", "equilibrium", "non_equilibrium"
  catalytic_wall: true                 # Wall catalyzes recombination reactions
  adiabatic: false                     # Adiabatic wall (true) or temperature-specified (false)

numerical:
  n_eta: 20                            # Grid points in boundary layer (20-200 recommended)
  eta_max: 6.0                         # Grid extent in similarity coordinate
  convergence_tolerance: 1.0e-9        # Solution convergence criterion
  max_iterations: 100000               # Maximum solver iterations

mixture:
  name: air_5                          # Gas mixture name (air_5 = N2, O2, NO, N, O)
  thermodynamic_database: RRHO         # Thermodynamic data: RRHO, NASA7, NASA9
  viscosity_algorithm: chapman_enskog_ldlt      # Viscosity calculation method
  thermal_conductivity_algorithm: chapman_enskog_ldlt  # Thermal conductivity method

output:
  output_directory: test_outputs       # Directory for simulation results

outer_edge:
  edge_points:
    - x: 0.0                           # Axial position [m]
      radius: 1                        # Body radius [m] at this position
      velocity: 0                   # Edge velocity [m/s]
      temperature: 5526.181601661059   # Edge temperature [K]
      pressure: 10386.998246546822     # Edge pressure [Pa]
      boundary_override: 
        enabled: false                 # Override species composition at edge
        # Species mass fractions [N2, O2, NO, N, O] if override enabled
        mass_fraction_condition: [2.746334e-05, 5.391048e-01, 8.388689e-05, 4.190457e-01, 4.173816e-02]
  
  # Flow field parameters
  velocity_gradient_stagnation: 4027.1213622326  # Stagnation velocity gradient [1/s]
  freestream_density: 0.0019382429                # Freestream density [kg/m³]
  freestream_velocity: 500000                     # Freestream velocity [m/s]
  
  # Finite thickness correction parameters (used when finite_thickness: true)
  finite_thickness_params:
    v_edge: -111.31796000              # Edge normal velocity [m/s]
    d2_ue_dxdy: -290979.9698604651     # Second derivative of edge velocity [1/s²]
    delta_bl: 0.0105250000             # Boundary layer thickness [m]

wall_parameters:
  temperatures: [1500]                 # Wall temperature(s) [K] for each x_station
  emissivity: 0                        # Surface emissivity (0-1) for radiation
  environment_temperature: 1           # Environment temperature [K] for radiation

# Parametric study configuration (catalytic efficiency analysis)
abacus:
  enabled: false                       # Enable parametric catalytic study
  catalyticity_values: [0.0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7]  # Catalytic efficiency values (0-1)
  temperature_range: [3000, 5000]     # Wall temperature range [K] for study
  temperature_points: 30               # Number of temperature points in study

# Continuation method parameters (for convergence)
continuation:
  wall_temperature_stable: 300        # Initial stable wall temperature [K]
  edge_temperature_stable: 500    # Initial stable edge temperature [K]
  pressure_stable: 10386.998246546822          # Initial stable pressure [Pa]

# Usage examples:
# ./blast config/air_5.yaml test_output
# python3 scripts/postprocess_blast.py --input test_outputs/simulation_20250713_232651.h5 --plots all --output results_h5
# python3 scripts/postprocess_blast_temperatures.py --input test_outputs/simulation_20250811_032725.h5 --plots all
# python3 scripts/postprocess_abacus.py --input test_outputs/simulation_abacus.h5