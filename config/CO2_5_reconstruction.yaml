# Edge reconstruction test configuration
# Reconstructs edge temperature from target heat flux

simulation:
  body_type: axisymmetric
  only_stagnation_point: true
  finite_thickness: true  # Will be forced true by edge_reconstruction
  diffusion_type: stefan_maxwell
  consider_thermal_diffusion: false
  consider_dufour_effect: false
  chemical_mode: "non_equilibrium"
  catalytic_wall: true              # Match reference case
  adiabatic: false

numerical:
  n_eta: 50                       
  eta_max: 6.0
  convergence_tolerance: 1.0e-10
  max_iterations: 10000000

mixture:
  name: CO2_5
  thermodynamic_database: RRHO
  viscosity_algorithm: chapman_enskog_ldlt
  thermal_conductivity_algorithm: chapman_enskog_ldlt
  state_model: ChemNonEq1T 

output:
  x_stations: [0.0]
  output_directory: test_outputs

# Standard outer_edge config (will be overridden by reconstruction)
outer_edge:
  edge_points:
    - x: 0.0
      radius: 1
      velocity: 0
      temperature: 5000  # This will be calculated
      pressure: 7000
      boundary_override: 
        enabled: true
        mass_fraction_condition: [2.746334e-05, 5.391048e-01, 8.388689e-05, 4.190457e-01, 4.173816e-02]  # CO2, CO, O2, O, C
  
  velocity_gradient_stagnation: 4027.1213622326
  freestream_density: 0.0019382429
  freestream_velocity: 500000
  
  finite_thickness_params:
    v_edge: -111.31796000
    d2_ue_dxdy: -290979.9698604651
    delta_bl: 0.0105250000

wall_parameters:
  temperatures: [5000]  # Fixed wall temperature matching reference 
  emissivity: 0.8       # Match reference case
  environment_temperature: 1

# Edge reconstruction configuration
edge_reconstruction:
  enabled: true
  
  # Target heat flux we want to achieve
  target_heat_flux: 571759  # [W/m²] From reference case
  
  # Boundary conditions for reconstruction
  boundary_conditions:
    pressure: 7000           # [Pa]
    wall_temperature: 5000   # [K] From reference case
    catalyticity: 1.0        # Full catalytic wall like reference
  
  # Flow parameters
  flow_parameters:
    velocity_gradient_stagnation: 4027.1213622326  # [1/s]
    freestream_density: 0.0019382429               # [kg/m³]
    freestream_velocity: 500000                    # [m/s]
  
  # Finite thickness parameters (required)
  finite_thickness_params:
    v_edge: -111.31796000           # [m/s]
    d2_ue_dxdy: -290979.9698604651  # [1/s²]
    delta_bl: 0.0105250000          # [m]
  
  # Solver configuration
  solver:
    initial_temperature_guess: 5600  # [K] Near expected value
    temperature_min: 5500            # [K] 
    temperature_max: 6300            # [K] Around 5905.5K
    tolerance: 1                   # 1000 W/m² tolerance
    max_iterations: 15

abacus:
  enabled: false
  
continuation:
  wall_temperature_stable: 3000
  edge_temperature_stable: 5905.5
  pressure_stable: 7000